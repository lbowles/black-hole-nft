<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BlackHole SVG</title>
  </head>

  <body>
    <div id="canvasContainer"></div>
    <script>
      const canvasSize = 14
      const holeSize = Math.random() * 5 + 2
      const pixelSize = 20

      function createCircleArray(size) {
        const gridSize = canvasSize
        let circleArray = []
        for (let i = 0; i < gridSize; i++) {
          let row = []
          for (let j = 0; j < gridSize; j++) {
            let x = j - gridSize / 2
            let y = i - gridSize / 2
            let distance = Math.sqrt(x * x + y * y)
            let value = 0
            //Each value represents a differtent color on the grid that is used in createSVG, these create the rings
            switch (true) {
              case distance <= size / 2:
                value = 1
                break
              case distance <= size / 2 + 1 && distance >= size / 2 - 1:
                value = 2
                break
              case distance <= size / 2 + 2 && distance >= size / 2 - 2:
                value = 3
                break
              case distance <= size / 2 + 3 && distance >= size / 2 - 3:
                value = 4
                break
              case distance <= size / 2 + 4 && distance >= size / 2 - 4:
                value = 5
                break
              case distance <= size / 2 + 6 && distance >= size / 2 - 6:
                value = 7
                break
              default:
                value = 0
            }
            circleArray.push(value)
          }
        }

        return circleArray
      }

      function createSVG(pixelArray) {
        const gridSize = canvasSize
        const backgroundColors = [
          "#140E0E",
          "#160F0D",
          "#17120E",
          "#181214",
          "#18130F",
          "#181310",
          "#181410",
          "#1A1210",
          "#1A1511",
          "#1B1310",
          "#1B1517",
          "#282221",
        ]
        const perimiterColors = ["#852C27", "#741D27", "#8F5359", "#D1652C"]
        const blackHoleColors = ["black", "#361902", "#FFD088", "#BD460A", "#390706"]
        let svg = `<svg width="${gridSize * pixelSize}" height="${
          gridSize * pixelSize
        }" style="background-color:transparent">`
        for (let i = 0; i < gridSize; i++) {
          for (let j = 0; j < gridSize; j++) {
            let x = j * pixelSize
            let y = i * pixelSize
            let randomIndex = Math.floor(Math.random() * 200)
            let fillColor = ""
            const pixelClass = pixelArray[i * gridSize + (j % gridSize)]

            if (pixelClass === 0) {
              // Background + small chance of dim star
              fillColor = randomIndex <= 2 ? "#504940" : backgroundColors[(randomIndex - 2) % backgroundColors.length]
            } else if (pixelClass >= 1 && pixelClass <= 6) {
              // Black hole
              fillColor = blackHoleColors[pixelClass - 1]
            } else if (pixelClass === 7) {
              // Perimiter
              if (randomIndex < perimiterColors.length) {
                fillColor = perimiterColors[randomIndex]
              } else {
                fillColor = backgroundColors[Math.floor(randomIndex % backgroundColors.length)]
              }
            }
            svg += `<rect x="${x}" y="${y}" width="${pixelSize}" height="${pixelSize}" fill="${fillColor}"/>`
          }
        }
        svg += `</svg>`
        return svg
      }

      document.getElementById("canvasContainer").innerHTML = ""
      const canvas = document.createElement("div")
      canvas.innerHTML = createSVG(createCircleArray(holeSize))
      document.getElementById("canvasContainer").appendChild(canvas)
    </script>
  </body>
</html>
